<?xml version="1.0"?>
<launch>
  <!-- 
    Hector SLAM - картографическая система без одометрии
  -->
  
  <!-- Основной узел Hector Mapping -->
  <node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen">
    <!-- Системы координат -->
    <param name="map_frame" value="map" />
    <param name="base_frame" value="base_footprint" />
    <param name="odom_frame" value="base_footprint" />
    
    <!-- Параметры карты -->
    <param name="map_resolution" value="0.05" />
    <param name="map_size" value="2048" />
    <param name="map_start_x" value="0.5" />
    <param name="map_start_y" value="0.5" />
    <param name="map_multi_res_levels" value="2" />
    
    <!-- Параметры обновления -->
    <param name="update_factor_free" value="0.4" />
    <param name="update_factor_occupied" value="0.9" />
    <param name="map_update_distance_thresh" value="0.4" />
    <param name="map_update_angle_thresh" value="0.06" />
    
    <!-- Параметры лидара -->
    <param name="laser_min_dist" value="0.1" />
    <param name="laser_max_dist" value="12.0" />
    
    <!-- Перенаправление топиков -->
    <remap from="scan" to="scan" />
  </node>

  <!-- Дополнительно: узел для сохранения карты -->
  <node pkg="hector_geotiff" type="geotiff_node" name="hector_geotiff" output="screen">
    <param name="map_file_path" value="$(find study_pkg)/maps" />
    <param name="map_file_base_name" value="hector_map" />
    <param name="draw_background_checkerboard" value="true" />
    <remap from="map" to="/map" />
  </node>
</launch>